<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>elephant.js</title>
  <link rel="stylesheet" href="http://jashkenas.github.com/docco/resources/docco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>elephant.js</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-1'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-1">&#182;</a>
        </div>
        <pre><code>   ______              __           __        _    
  / __/ /___ ___ ___  / / ___ ____ / /_      (_)___
 / _// // -_) -_) _ \/ _ | _ `/ _ | __/_    / /(_-&lt;
/___/_/ \__/\__/ .__/_//_|_,_/_//_|__/(_)__/ //___/
              /_/                       |___/                                         
</code></pre>

<p>elephant.js 0.0.1 &copy; 2011 Jeff Remer</p>

<p>MIT License, see <a href="https://github.com/jeffremer/elephant.js/blob/master/LICENSE">LICENSE</a></p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">Elephant</span><span class="p">;</span>
  <span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!=</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">?</span> <span class="nx">Elephant</span> <span class="o">=</span> <span class="nx">exports</span> <span class="o">:</span> <span class="nx">Elephant</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">Elephant</span> <span class="o">=</span> <span class="p">{};</span>
  
  <span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;There&#39;s an Elephant in the room.&quot;</span><span class="p">)</span>
  </pre></div>
      </td>
    </tr>
    <tr id='section-Local_Helpers'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Local_Helpers">&#182;</a>
        </div>
        <h2>Local Helpers</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre>  </pre></div>
      </td>
    </tr>
    <tr id='section-3'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-3">&#182;</a>
        </div>
        <p><code>each</code> and <code>map</code>
Taken from <a href="http://documentcloud.github.com/underscore">underscore.js</a>
Rather than make underscore a dependency, here are standalone versions
of Jeremy Ashkenas wonderful each and map functions.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="kd">function</span> <span class="nx">each</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">iterator</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">obj</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">forEach</span> <span class="o">===</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">obj</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">iterator</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!!</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span><span class="p">.</span><span class="nx">toExponential</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">)))</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">iterator</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="p">{})</span> <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">iterator</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="p">{})</span> <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  
  <span class="kd">function</span> <span class="nx">map</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">iterator</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">obj</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">map</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">map</span> <span class="o">===</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">map</span><span class="p">)</span> <span class="k">return</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">iterator</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>
    <span class="nx">each</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">results</span><span class="p">[</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">iterator</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">list</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>			
  <span class="p">}</span>
  </pre></div>
      </td>
    </tr>
    <tr id='section-Elephant.has'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Elephant.has">&#182;</a>
        </div>
        <h2>Elephant.has</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">Elephant</span><span class="p">.</span><span class="nx">has</span> <span class="o">=</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-5'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-5">&#182;</a>
        </div>
        <p>Determines if window.localStorage is available</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">localStorage</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!!</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">;</span> <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="kc">false</span><span class="p">};</span>
    <span class="p">}(),</span></pre></div>
      </td>
    </tr>
    <tr id='section-6'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-6">&#182;</a>
        </div>
        <p>Tests to make sure cookies are available</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">cookies</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">cookieEnabled</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">=</span> <span class="s1">&#39;elephantcookie=1&#39;</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;cookietest=&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">=</span> <span class="s2">&quot;cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT&quot;</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}()</span>
  <span class="p">};</span>
  </pre></div>
      </td>
    </tr>
    <tr id='section-Elephant.Trunk'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Elephant.Trunk">&#182;</a>
        </div>
        <h2>Elephant.Trunk</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre>  </pre></div>
      </td>
    </tr>
    <tr id='section-8'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-8">&#182;</a>
        </div>
        <p>The main store class.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">Elephant</span><span class="p">.</span><span class="nx">Trunk</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-9'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-9">&#182;</a>
        </div>
        <p><code>name</code> is a namespace for the localStorage object</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-10'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-10">&#182;</a>
        </div>
        <p><code>Elephant.Trunk.data</code> is JSON hash of guid to object</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">(</span><span class="nx">store</span> <span class="o">&amp;&amp;</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">store</span><span class="p">))</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="p">};</span>
    </pre></div>
      </td>
    </tr>
    <tr id='section-11'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-11">&#182;</a>
        </div>
        <p><code>guid</code> generates a random 32-bit unique ID</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">Elephant</span><span class="p">.</span><span class="nx">Trunk</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s1">&#39;xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx&#39;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[xy]/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">16</span><span class="o">|</span><span class="mi">0</span><span class="p">,</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">c</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span> <span class="o">?</span> <span class="nx">r</span> <span class="o">:</span> <span class="p">(</span><span class="nx">r</span><span class="o">&amp;</span><span class="mh">0x3</span><span class="o">|</span><span class="mh">0x8</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">};</span>

  <span class="nx">Elephant</span><span class="p">.</span><span class="nx">Trunk</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sync</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">};</span>
  </pre></div>
      </td>
    </tr>
    <tr id='section-CRUD'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CRUD">&#182;</a>
        </div>
        <h1>CRUD</h1>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Create'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Create">&#182;</a>
        </div>
        <h2>Create</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-14'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-14">&#182;</a>
        </div>
        <p><code>save</code> creates a new guid for the object, assigns
the guid, updates the memory store, then syncs the
local store.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  </pre></div>
      </td>
    </tr>
    <tr id='section-15'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-15">&#182;</a>
        </div>
        <p><code>guid</code> a very low chance of colliding, even so the <code>save</code> method
checks to see if the <code>guid</code> is in use and generates a new one before
clobbering any existing objects.
TODO If the object has a guid update instead of save.</p>

<pre><code>store.save({...}) // -&gt; {..., guid: '53b425a6-47cb-462c-9498-ba236becee06'}   
</code></pre>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">Elephant</span><span class="p">.</span><span class="nx">Trunk</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">save</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">uuid</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">guid</span><span class="p">();</span>
    <span class="k">while</span><span class="p">(</span><span class="nx">uuid</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="nx">uuid</span> <span class="o">=</span> <span class="nx">guid</span><span class="p">();</span>
    <span class="nx">object</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">uuid</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">object</span><span class="p">.</span><span class="nx">guid</span><span class="p">]</span> <span class="o">=</span> <span class="nx">object</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sync</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">object</span><span class="p">;</span>
  <span class="p">};</span>
  </pre></div>
      </td>
    </tr>
    <tr id='section-Read'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Read">&#182;</a>
        </div>
        <h2>Read</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre>    </pre></div>
      </td>
    </tr>
    <tr id='section-17'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-17">&#182;</a>
        </div>
        <p><code>find</code> retrieves an object by guid.</p>

<pre><code>store.find('53b425a6-47cb-462c-9498-ba236becee06') // -&gt; {...}
</code></pre>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">Elephant</span><span class="p">.</span><span class="nx">Trunk</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">find</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">guid</span><span class="p">)</span> <span class="p">{</span>		
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">guid</span><span class="p">]</span>
  <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-18'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-18">&#182;</a>
        </div>
        <p><code>findAll</code> retrieves all of the objects as an array.</p>

<pre><code>store.findAll() // -&gt; [{...}, {...}, {...}]
</code></pre>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">Elephant</span><span class="p">.</span><span class="nx">Trunk</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">findAll</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>		
    <span class="k">return</span> <span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span><span class="k">return</span> <span class="nx">obj</span><span class="p">;})</span>
  <span class="p">};</span>
  </pre></div>
      </td>
    </tr>
    <tr id='section-Update'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Update">&#182;</a>
        </div>
        <h2>Update</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre>  </pre></div>
      </td>
    </tr>
    <tr id='section-20'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-20">&#182;</a>
        </div>
        <p><code>update</code> saves if the object has no guid, or
it replaces the object in memory store and syncs.</p>

<pre><code>    store.update({..., guid: '53b425a6-47cb-462c-9498-ba236becee06'}) // -&gt; {..., guid: '53b425a6-47cb-462c-9498-ba236becee06'}
</code></pre>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">Elephant</span><span class="p">.</span><span class="nx">Trunk</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">object</span><span class="p">.</span><span class="nx">guid</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">object</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">object</span><span class="p">.</span><span class="nx">guid</span><span class="p">]</span> <span class="o">=</span> <span class="nx">object</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">sync</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">object</span><span class="p">;</span>
  <span class="p">};</span>
  </pre></div>
      </td>
    </tr>
    <tr id='section-Destroy'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Destroy">&#182;</a>
        </div>
        <h2>Destroy</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-22'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-22">&#182;</a>
        </div>
        <p><code>destroy</code> removes the object from the store and deletes
the guid off the object before returning it.</p>

<pre><code>store.destroy({..., guid: '53b425a6-47cb-462c-9498-ba236becee06'}) // -&gt; {...}
</code></pre>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">Elephant</span><span class="p">.</span><span class="nx">Trunk</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">guid</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span><span class="p">.</span><span class="nx">guid</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">object</span><span class="p">.</span><span class="nx">guid</span><span class="p">];</span>
      <span class="k">delete</span> <span class="nx">object</span><span class="p">.</span><span class="nx">guid</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">sync</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">object</span><span class="p">;</span>
  <span class="p">};</span>
  </pre></div>
      </td>
    </tr>
    <tr id='section-23'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-23">&#182;</a>
        </div>
        <p><code>destroyAll</code> clears the internal data store then saves the blank object.</p>

<pre><code>store.destroyAll() // -&gt; undefined  
</code></pre>

      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">Elephant</span><span class="p">.</span><span class="nx">Trunk</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroyAll</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sync</span><span class="p">();</span>
  <span class="p">};</span>
<span class="p">})()</span></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
